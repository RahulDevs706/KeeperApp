(this["webpackJsonpkeeper-app-part-1-starting"]=this["webpackJsonpkeeper-app-part-1-starting"]||[]).push([[0],{105:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),l=n(16),o=n.n(l),c=n(22),i=n(64),u=n(0),s=n(8),m=n(11),d=function(e){return fetch("/user/login",{method:"post",body:JSON.stringify(e),headers:{"Access-Control-Allow-Origin":"http://localhost:3000","Content-Type":"application/json"}}).then((function(e){return 401!==e.status?e.json().then((function(e){return e})):{isAuthenticated:!1,user:{username:"",role:""}}}))},f=function(e){return console.log(e),fetch("/user/register",{method:"post",body:JSON.stringify(e),headers:{"Access-Control-Allow-Origin":"http://localhost:3000","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e}))},p=function(){return fetch("/user/logout",{"Access-Control-Allow-Origin":"http://localhost:3000"}).then((function(e){return e.json()})).then((function(e){return e}))},h=function(){return fetch("/user/authenticated",{"Access-Control-Allow-Origin":"http://localhost:3000"}).then((function(e){return 401!==e.status?e.json().then((function(e){return e})):{isAuthenticated:!1,user:{username:"",fullName:""}}}))},E=Object(a.createContext)(),g=function(e){var t=e.children,n=Object(a.useState)(null),l=Object(m.a)(n,2),o=l[0],c=l[1],i=Object(a.useState)(!1),u=Object(m.a)(i,2),s=u[0],d=u[1],f=Object(a.useState)(!1),p=Object(m.a)(f,2),g=p[0],b=p[1];return Object(a.useEffect)((function(){h().then((function(e){c(e.user),d(e.isAuthenticated),b(!0)}))}),[]),r.a.createElement("div",null,g?r.a.createElement(E.Provider,{value:{user:o,setUser:c,isAuthenticated:s,setIsAuthenticated:d}},t):r.a.createElement("h1",null,"Loading"))},b=n(127),v=n(138);var j=function(){var e,t=Object(a.useContext)(E),n=t.isAuthenticated,l=t.user,o=Object(s.g)();return r.a.createElement("div",null,r.a.createElement("header",{className:"col-12"},r.a.createElement(u.b.Provider,{value:{size:"1.5rem",color:"#fff"}},r.a.createElement("h1",null,r.a.createElement(c.b,{to:"/notes"},r.a.createElement(i.a,null)),"Keeper")),r.a.createElement(u.b.Provider,{value:{size:"2rem",color:"#fff"}},r.a.createElement("div",null,n?r.a.createElement("div",{style:{}},r.a.createElement(b.a,null,r.a.createElement(v.a,{onClick:function(){o.push("/")}},null===l||void 0===l||null===(e=l.fullName)||void 0===e?void 0:e.charAt(0)))):null))))},O=(new Date).getFullYear();var y=function(){return r.a.createElement("footer",null,r.a.createElement("p",null,"Copyright \xa9 ",O))},C=function(){return fetch("/user/notes").then((function(e){return 401!==e.status?e.json().then((function(e){return e})):{message:{msgBody:"UnAuthorized",msgError:!0}}}))},x=function(e){return fetch("/user/note",{method:"post",body:JSON.stringify(e),headers:{"Access-Control-Allow-Origin":"http://localhost:3000","Content-Type":"application/json"}}).then((function(e){return 401!==e.status?e.json().then((function(e){return e})):{message:{msgBody:"UnAuthorized",msgError:!0}}}))},N=function(e){return fetch("/user/delete/"+e,{method:"delete"}).then((function(e){return 401!==e.status?e.json().then((function(e){return e})):{message:{msgBody:"UnAuthorized",msgError:!0}}}))},A=n(66),w=n.n(A);var S=function(e){return r.a.createElement("div",{className:"note "},r.a.createElement("h1",null,e.title),r.a.createElement("p",null,e.content),r.a.createElement("button",{onClick:function(){e.onDelete(e.id)}},r.a.createElement(w.a,null)))},k=n(7),I=n(30),U=n(67),z=n.n(U),D=n(128),T=n(137);var F=function(e){e.addedNote;var t=e.setAddedNote,n=e.Note,l=e.NoteSetter,o=Object(a.useState)(!1),c=Object(m.a)(o,2),i=c[0],u=c[1];function s(e){e.preventDefault(),x(n).then((function(e){var n=e.message;f(),n.msgError||C().then((function(e){t(null===e||void 0===e?void 0:e.notes)}))})),u(!1)}function d(e){var t=e.target,n=t.name,a=t.value;l((function(e){return Object(I.a)(Object(I.a)({},e),{},Object(k.a)({},n,a))}))}var f=function(){l({title:"",content:""})};return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:s,method:"post",className:"create-note"},!0===i&&r.a.createElement("zoom",{in:!0},r.a.createElement("input",{name:"title",onChange:d,value:n.title,placeholder:"Title"})),r.a.createElement(T.a,{in:!0},r.a.createElement("textarea",{name:"content",required:!0,onChange:d,value:n.content,onClick:function(){u(!0)},placeholder:"Take a note...",rows:i?"3":"1"})),i&&r.a.createElement(T.a,{in:!0},r.a.createElement(D.a,{onClick:s},r.a.createElement(z.a,{fontSize:"large"})))))};var P=function(){var e=Object(a.useState)({title:"",content:""}),t=Object(m.a)(e,2),n=t[0],l=t[1],o=Object(a.useState)([]),c=Object(m.a)(o,2),i=c[0],u=c[1];function s(e){N(e).then((function(e){}))}return Object(a.useEffect)((function(){C().then((function(e){u(null===e||void 0===e?void 0:e.notes)}))}),[i]),r.a.createElement("div",null,r.a.createElement(F,{addedNote:i,NoteSetter:l,Note:n,setAddedNote:u}),r.a.createElement("div",{className:"Device"},i.map((function(e,t){return r.a.createElement(S,{key:e._id,id:e._id,title:e.title,content:e.content,onDelete:s})}))))},_=n(129),B=n(130),J=n(131),L=n(132),H=n(133),W=Object(_.a)((function(e){return{large:{fontSize:"2.5rem",width:e.spacing(12),height:e.spacing(12)},dropdownClass:{display:"inline"}}})),R=function(){var e=W(),t=Object(s.g)(),n=Object(a.useContext)(E),l=n.user,o=n.setUser,c=n.setIsAuthenticated,i=null===l||void 0===l?void 0:l.fullName,u=null===l||void 0===l?void 0:l.username,m=null===i||void 0===i?void 0:i.charAt(0);return r.a.createElement("div",{style:{},className:"form_container"},r.a.createElement("div",{style:{width:"auto",display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement(B.a,{component:"nav"},r.a.createElement(J.a,null,r.a.createElement(L.a,{primary:r.a.createElement("div",{style:{display:"flex",padding:"10px",alignItems:"center",justifyContent:"center"}},r.a.createElement(v.a,{className:e.large},m))})),r.a.createElement(J.a,null,r.a.createElement(L.a,{primary:r.a.createElement("div",{style:{color:"grey",fontSize:"1.5rem",textAlign:"center",wordWrap:"break-word"}},i)})),r.a.createElement(J.a,null,r.a.createElement(L.a,{primary:r.a.createElement("div",{style:{color:"grey",fontSize:"1rem",textAlign:"center",wordWrap:"break-word"}}," ",u)})),r.a.createElement(H.a,null),r.a.createElement(J.a,null," ",r.a.createElement(L.a,{primary:r.a.createElement("div",{style:{padding:"5px",textAlign:"center"}},r.a.createElement("button",{className:" w-25 btn btn-block btn-warning ",onClick:function(){t.push("/notes")}}," Notes"))})),r.a.createElement(H.a,null),r.a.createElement(J.a,null,r.a.createElement(L.a,{primary:r.a.createElement("div",{style:{padding:"5px",textAlign:"center"}},r.a.createElement("button",{onClick:function(){p().then((function(e){e.success&&(o(e.user),c(!1),t.push("/"))}))},className:"btn btn-outline-danger w-75"},"Logout"))})))))},q=n(3),K=n(68),Y=n.n(K),G=n(44),M=n(139),Q=n(136),V=n(134),X=n(45),Z=n(135),$=function(e){var t=e.HandleSubmit,n=e.handleChange_form,l=e.isSignup,o=Object(a.useState)(!1),c=Object(m.a)(o,2),i=c[0],u=c[1];return r.a.createElement("form",{onSubmit:t},"signup"===l&&r.a.createElement("div",{class:"form-floating "},r.a.createElement("input",{type:"text",name:"fullName",onChange:n,className:"form-control firstInputofUser",placeholder:"Full Name",autoComplete:"off"}),r.a.createElement("label",{htmlFor:"floatingInput"},"Full Name")),r.a.createElement("div",{class:"form-floating "},r.a.createElement("input",{type:"text",name:"username",onChange:n,className:"signup"===l?"form-control midInputofUser":"form-control firstInputofUser",id:"floatingInput",placeholder:"username",autoComplete:"off"}),r.a.createElement("label",{htmlFor:"floatingInput"},"Username")),r.a.createElement("div",{class:"form-floating "},r.a.createElement("input",{type:i?"text":"password",onChange:n,name:"password",className:"signup"===l?"form-control midInputofUser":"form-control lastInputofUser",id:"floatingPassword",placeholder:"Password"}),r.a.createElement("label",{htmlFor:"floatingPassword"},"Password"),r.a.createElement("i",{className:i?"fa fa-eye-slash":"fa fa-eye",onClick:function(){u(!i)},"aria-hidden":"true"})),r.a.createElement("div",{style:{paddingTop:"10px"}},r.a.createElement("button",{className:"w-100 btn btn-lg btn-outline-primary btn-block",type:"submit"},"signup"===l?"Signup":"Login")))},ee=function(e){var t="alert";return e.message.msgError?t+="alert-danger":t+="alert-primary",t+"text-center"},te=function(e){return r.a.createElement("div",{className:ee(e),role:"alert"},e.message.msgBody)},ne=["children","value","index"];function ae(e){var t=e.children,n=e.value,a=e.index,l=Object(q.a)(e,ne);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:n!==a,id:"full-width-tabpanel-".concat(a),"aria-labelledby":"full-width-tab-".concat(a)},l),n===a&&r.a.createElement(Z.a,{p:3},r.a.createElement(X.a,null,t)))}var re=Object(_.a)((function(e){return{root:{backgroundColor:e.palette.background.paper,width:375,borderRadius:".5rem"}}})),le={fullName:"",username:"",password:""};var oe=function(){var e=re(),t=Object(G.a)(),n=Object(a.useState)(0),l=Object(m.a)(n,2),o=l[0],c=l[1],i=Object(a.useState)(le),u=Object(m.a)(i,2),p=u[0],h=u[1],g=Object(a.useState)(null),b=Object(m.a)(g,2),v=b[0],j=b[1],O=Object(a.useContext)(E),y=Object(a.useRef)(null);Object(a.useEffect)((function(){return function(){clearTimeout(y)}}),[]);var C=Object(a.useState)("login"),x=Object(m.a)(C,2),N=x[0],A=x[1];function w(e){var t=e.target,n=t.name,a=t.value;h(Object(I.a)(Object(I.a)({},p),{},Object(k.a)({},n,a)))}var S=Object(s.g)();return r.a.createElement("div",{className:"form_container"},r.a.createElement("div",{className:e.root},r.a.createElement(M.a,{position:"static",color:"default"},r.a.createElement(Q.a,{value:o,onChange:function(e,t){c(t)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth","aria-label":"full width tabs example"},r.a.createElement(V.a,{onClick:function(){return A("login")},label:"Login"}),r.a.createElement(V.a,{onClick:function(){return A("signup")},label:"Signup"}))),r.a.createElement(Y.a,{axis:"rtl"===t.direction?"x-reverse":"x",index:o,onChangeIndex:function(e){c(e),0===e?A("login"):1===e&&A("signup")}},r.a.createElement(ae,{value:o,index:0,dir:t.direction},r.a.createElement($,{handleChange_form:w,HandleSubmit:function(e){e.preventDefault(),d(p).then((function(e){var t=e.isAuthenticated,n=e.user,a=e.message;t?(O.setUser(n),O.setIsAuthenticated(t),S.push("/notes")):j(a)}))},isSignup:N}),v?r.a.createElement(te,{message:v}):null),r.a.createElement(ae,{value:o,index:1,dir:t.direction},r.a.createElement($,{handleChange_form:w,HandleSubmit:function(e){f(p).then((function(e){var t=e.message;j(t),h({initialState:le}),t.msgError||(y=setTimeout((function(){c(0),A("login")}),2e3))})),e.preventDefault()},isSignup:N}),v?r.a.createElement(te,{message:v}):null))))},ce=function(){var e=Object(a.useContext)(E).isAuthenticated;return r.a.createElement("div",null,e?r.a.createElement(R,null):r.a.createElement(oe,null))},ie=["component"],ue=function(e){var t=e.component,n=Object(q.a)(e,ie),l=Object(a.useContext)(E).isAuthenticated;return r.a.createElement(s.b,Object.assign({},n,{render:function(e){return l?r.a.createElement(t,e):r.a.createElement(s.a,{to:{pathname:"/"}})}}))};var se=function(){return r.a.createElement("div",null,r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/",component:ce}),r.a.createElement(ue,{path:"/notes",component:P})))};var me=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(j,null),r.a.createElement(se,null),r.a.createElement(y,null))};o.a.render(r.a.createElement(g,null,r.a.createElement(c.a,null,r.a.createElement(me,null))),document.getElementById("root"))},77:function(e,t,n){e.exports=n(105)}},[[77,1,2]]]);
//# sourceMappingURL=main.ca657d6c.chunk.js.map